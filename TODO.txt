================================================================================
Lightweight CI/CD - TODO
================================================================================
Updated: 2026-01-07

Phase 1: Agent 기본 구조
[T] Rust 프로젝트 구조 (Cargo.toml, Dockerfile)
[T] SQLite 데이터베이스 연동 (sqlx 0.8)
[T] 데이터베이스 스키마 및 마이그레이션
[T] 이벤트 버스 시스템 (tokio broadcast)
[T] Docker API 연동 (bollard 0.19)
[T] 로깅 설정 (tracing)

Phase 2: 빌드 시스템
[T] Docker 빌드 컨테이너 실행 (agent/src/docker/client.rs)
[T] 빌드 실행기 (agent/src/build/executor.rs)
[T] 배포 시스템 (agent/src/build/deployer.rs)
[T] Blue/Green 슬롯 전환
[T] 빌드 큐 (agent/src/build/worker.rs)
[T] 캐시 시스템 (gradle, maven, npm, pip, cargo)
[T] Glob 패턴 지원 (globset)
[T] 수동 빌드 트리거 API
[T] 프로젝트 삭제 API
[T] Docker 이미지 pull 에러 감지

Phase 3: API 서버
[T] Webhook 핸들러 (agent/src/api/webhook.rs)
[T] HMAC-SHA256 서명 검증
[T] REST API (GET/POST/DELETE /api/projects)
[T] REST API (POST /api/projects/:id/builds)
[T] REST API (GET /api/builds)
[T] WebSocket 서버 (agent/src/api/ws.rs)
[T] WebSocket 브로드캐스터 (agent/src/ws_broadcaster.rs)

Phase 4: 리버스 프록시
[T] Path-based 라우팅 (agent/src/proxy/router.rs)
[T] HTTP 요청 헤더 전달

Phase 5: Web UI
[T] Svelte 프론트엔드 (frontend-svelte/)
[T] Dashboard 페이지
[T] Setup 페이지
[T] Build History 페이지
[T] Vite 빌드 시스템
[T] SPA 라우팅 (svelte-spa-router)
[T] Static 파일 서빙 (tower-http)
[F] WebSocket 클라이언트 연결
[F] 실시간 빌드 상태 업데이트
[F] 로그 스트리밍 API (GET /api/builds/:id/logs)
[F] 프론트엔드 로그 뷰어

Phase 6: 배포 설정
[T] docker-compose.yml (프로덕션)
[T] 환경변수 제거 (DATABASE_URL, RUST_LOG 하드코딩)
[T] Webhook Secret 자동 생성 (DB 저장)
[T] GET /api/settings/webhook-secret API
[T] Docker Hub 이미지 배포 (choho97/lightweight-ci:latest)
[T] SQLite 데이터베이스 자동 생성 (create_if_missing)
[T] Axum 0.7 호환성 (라우팅 문법, fallback_service)
[T] GLIBC 호환성 (Debian Trixie 통일)
[T] 포트 구성 (웹 UI: 10000, 리버스 프록시: 9999)
[F] README.md
[F] DEPLOYMENT.md
[F] 통합 테스트
[F] CI/CD 파이프라인 (GitHub Actions)

Phase 7: 개선사항
[F] Health Check 실패 시 자동 롤백
[F] 배포 실패 이력 저장
[F] 로그 순환(rotation)
[F] 메트릭 수집
[F] 알림 시스템

================================================================================
최근 커밋: 13f8cc6 (Axum/SQLite 호환성 수정, 배포 완료)
Docker Hub: choho97/lightweight-ci:latest (sha256:df8d25968e0918...)
다음 작업: Phase 5 WebSocket 연결 또는 Phase 6 문서화
